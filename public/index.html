<!DOCTYPE html>
<html lang="en">


<script src="js/jquery-1.12.1.min.js"></script>

	<script src="js/bootstrap.min.js"></script>

<script>




function updateSessionData(session)
{
	$.ajax({
							 url: 'http://localhost:3000/session/'+1,
							 type: 'PUT',
							 contentType: 'application/json',
							 dataType:'json',
							 data: JSON.stringify({
									user : session,
									isactive : true
							 }),
							 success: function(data) {
								 alert("success"+session);
								 alert("data ::: "+data.id)
								 if(data.id!== 'temp')
									 {
								 		var url = "http://localhost:7012/dashboard.html";
									 	window.location.replace(url);
									 }
							 },

							 error: function(xhr, textStatus, errorThrown) {
								 
									 console.log("Error" + xhr + textStatus + errorThrown);
							 }
			 });
}



function login(){

	alert("hiiiiii");
	$("#f1").submit(function(event){

	    event.preventDefault();
	})
	
    	var email = $("#inputEmail").val();
      var password = $("#inputPassword").val();
      var session=null;

    if(email!='' || password!= '' ){
    	//alert('Please enter details');
    	if(email==''){$("#inputEmail").focus();}
    	if(password==''){$("#inputPassword").focus();}
    
      alert("email : "+email)
		$.ajax({
				url: 'http://localhost:3000/users/'+email,
				type: "GET",
				contentType:'application/json',
				dataType:'json',
				success: function(data) {
					if(data.id===email)
						{
							session = email;
							updateSessionData(session);
						}
				},
				error: function(xhr, textStatus, errorThrown) {
					 console.log("Error" + xhr + textStatus + errorThrown);
				}
		});
    }
  }


</script>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Community Twitter Gateway</title>

<meta name="description"
	content="Source code generated using layoutit.com">
<meta name="author" content="LayoutIt!">

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/styles.css" rel="stylesheet">
<link href="css/tweetApp.css" rel="stylesheet">
<script src="js/jquery-1.12.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/tweetApp.js"></script>
</head>
<body>
	<header class="navbar navbar-default navbar-fixed-top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">TweetApp</a>
    </div>
    <nav class="collapse navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="#">Dashboard</a>
        </li>
        <li>
          <a href="#">About</a>
        </li>
        
       
      </ul>
      <ul class="nav navbar-right navbar-nav">
        
          <li>
          <a href="http://localhost:7012/index.html">Signout</a>
        </li>
      </ul>
    </nav>
  </div>
</header>	
	
<body>
	<div class="container" style="max-height: 90vh;">
		<div class="row">

			<div class="col-md-4 col-md-push-9">
				<div id="sidebar">
					<form id="f1" class="form-signin">
						<h2 id="hd" class="form-signin-heading">Sign in</h2>

						<input type="text" id="inputEmail" class="form-control"
							placeholder="username" required autofocus> <br /> <input
							type="password" id="inputPassword" class="form-control"
							placeholder="Password" required> <br />
						<button class="btn btn-lg btn-primary btn-block" id="Signin"
							type="submit"v onclick="login()">Sign in</button>
						<div id="link">
							<a id="crtLink" href="/signUp">Create account</a>
						</div>
					</form>
				</div>
			</div>

			<div class="col-md-8 col-md-pull-4">
				<div id="main">
					<div id="post" class="post"></div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
